#!/bin/bash

dotfile_dir=${HOME}/dotfiles
exclude_list=("LICENSE" "mklinks" "README.md")

cd ${dotfile_dir}\
  && dotfiles=($(find * -type f))\
  && directories=($(find * -type d))\
  || exit 1

for entry in "${exclude_list[@]}"; do
  dotfiles=(${dotfiles[@]//${entry}})
done

for dir in "${directories[@]}"; do
  mkdir -p ${HOME}/${dir}
done

for file in "${dotfiles[@]}"; do
  ln --force --relative --symbolic "${dotfile_dir}/${file}" "${HOME}/.${file}"
done

